NAME		= so_long

ARCH		= arch -x86_64
CC			= cc

DIR_HDR		= mandatory
DIR_SRCS	= mandatory
DIR_LIBMLX	= mlx

SRCS		= \
$(wildcard $(DIR_SRCS)/*.c)

OBJS		= $(SRCS:.c=.o)

LIBMLX		= $(DIR_LIBMLX)/libmlx.a

FLAG		= -Wall -Wextra -Werror \
$(FLAG_HDR) \
$(FLAG_LIBMLX)

FLAG_HDR	= -I $(DIR_HDR)
FLAG_LIBMLX	= -I $(DIR_LIBMLX)
FLAG_MLX	= -Lmlx -lmlx -framework OpenGL -framework AppKit -lz

all			: $(NAME)

$(NAME)		: $(LIBMLX) $(OBJS)
			$(CC) $(FLAG) $(FLAG_MLX) $(LIBMLX) $(OBJS) -o $@			

$(LIBMLX)	:
			$(MAKE) -C $(DIR_LIBMLX)

%.o			: %.c
			$(CC) $(FLAG) -c $< -o $@

clean		:
			$(RM) $(OBJS)

fclean		:
			make clean
			$(RM) $(NAME)

re			:
			make fclean
			make all

.PHONY		: all celan fclean re
